<!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><title>Holo Earth</title><style>*{margin:0;padding:0;}body{width:100vw;height:100vh;background-color:#000;overflow:hidden;}</style><script src="./js/mark.js"></script><script src="./js/tiles.js"></script><script src="./js/core.js"></script><script>constcreateEarth=(args)=>{window.earth=newGlobe(window.innerWidth,window.innerHeight,{font:"黑体",tiles:tiles,data:markData.slice(),markerColor:"#ffcc00",baseColor:dbo("main_color","#00ffff"),pinColor:"#8fd8d8",satelliteColor:"#ff0000",maxPins:500,maxMarkers:4,dayLength:Number(dbo("speed",36000)),scale:Number(dbo("scale",1)),introLinesDuration:2000,viewAngle:Number(dbo("view"),0.1),});document.querySelector("body").appendChild(earth.domElement);earth.init(function(){renderer();setTimeout(function(){constconstellation=[];for(vari=0;i<2;i++){for(varj=0;j<3;j++){constellation.push({lat:50*i-30+15*Math.random(),lon:120*j-120+30*i,altitude:1.3,});}}earth.addConstellation(constellation,{coreColor:"#00ff00",numWaves:8,});},4000);setTimeout(()=>{earth.addMarker(49.25,-123.1,"Vancouver");earth.addMarker(35.6895,129.69171,"Tokyo",true);},2000);});};constrenderer=()=>{if(earth)earth.tick();requestAnimationFrame(renderer);};window.dbi=(i,v)=>{localStorage.setItem(i,v);};window.dbo=(i,d)=>{constres=localStorage.getItem(i)?localStorage.getItem(i):d;returnres;};window.onload=()=>{window.addEventListener("resize",()=>{if(earth){earth.camera.aspect=window.innerWidth/window.innerHeight;earth.camera.updateProjectionMatrix();earth.renderer.setSize(window.innerWidth,window.innerHeight);}},false);createEarth();};</script></head><body><script>window.wallpaperPropertyListener={applyUserProperties:function(props){if(props.main_color){letcustomColor=props.main_color.value.split("");customColor=customColor.map((c)=>{c=Math.ceil(c*255);c=c.toString(16);if(c.length!=2){c+=0;}returnc;});dbi("main_color","#"+customColor[0]+customColor[1]+customColor[2]);}if(props.speed){dbi("speed",props.speed.value*1000);earth.dayLength=props.speed.value*1000;}if(props.offsetx){dbi("offsetx",props.offsetx.value);document.querySelector("canvas").style.transform=`translate(${dbo("offsetx",0)}%,${dbo("offsety",0)}%)`;}if(props.offsety){dbi("offsety",props.offsety.value);document.querySelector("canvas").style.transform=`translate(${dbo("offsetx",0)}%,${dbo("offsety",0)}%)`;}if(props.view){dbi("view",props.view.value);if(window.earth)window.earth.viewAngle=dbo("view",0.1);}if(props.scale){dbi("scale",props.scale.value);}console.log(props);},};</script></body></html>
